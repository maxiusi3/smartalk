<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>vTPR é€‰é¡¹æ˜¾ç¤ºé—®é¢˜ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            margin: 0;
            padding: 20px;
            background: #f5f5f5;
        }
        .test-container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 12px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        .test-button {
            display: inline-block;
            padding: 12px 24px;
            margin: 10px;
            background: #3b82f6;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            font-weight: 500;
            transition: background 0.2s;
        }
        .test-button:hover {
            background: #2563eb;
        }
        .fixed-button {
            background: #10b981;
        }
        .fixed-button:hover {
            background: #059669;
        }
        .problem-button {
            background: #ef4444;
        }
        .problem-button:hover {
            background: #dc2626;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            border: 1px solid #e5e7eb;
            border-radius: 8px;
        }
        .comparison {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin: 20px 0;
        }
        .comparison-item {
            padding: 15px;
            border-radius: 8px;
        }
        .before {
            background: #fef2f2;
            border: 1px solid #fecaca;
        }
        .after {
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
        }
        .code-block {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Monaco', 'Menlo', monospace;
            font-size: 14px;
            overflow-x: auto;
            margin: 10px 0;
        }
        .highlight {
            background: #fff3cd;
            padding: 2px 4px;
            border-radius: 3px;
        }
        .status {
            display: inline-block;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        .status.fixed {
            background: #dcfce7;
            color: #166534;
        }
        .status.problem {
            background: #fef2f2;
            color: #991b1b;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ”§ vTPR é€‰é¡¹æ˜¾ç¤ºé—®é¢˜ä¿®å¤éªŒè¯</h1>
        
        <div class="test-section">
            <h2>é—®é¢˜æè¿°</h2>
            <p>ç”¨æˆ·åœ¨ vTPRï¼ˆéŸ³ç”»åŒ¹é…è®­ç»ƒï¼‰é¡µé¢ä¸­ï¼Œå³ä¾§çš„å››ä¸ªè§†é¢‘é€‰é¡¹æ— æ³•æ˜¾ç¤ºï¼Œå¯¼è‡´å­¦ä¹ æµç¨‹ä¸­æ–­ã€‚</p>
            
            <div class="comparison">
                <div class="comparison-item before">
                    <h3>ğŸš« ä¿®å¤å‰</h3>
                    <ul>
                        <li>å³ä¾§åªæ˜¾ç¤º"è¯·å…ˆå¬å®ŒéŸ³é¢‘å†…å®¹"</li>
                        <li>å››ä¸ªè§†é¢‘é€‰é¡¹ä¸æ˜¾ç¤º</li>
                        <li>ç”¨æˆ·æ— æ³•ç»§ç»­å­¦ä¹ </li>
                        <li>éŸ³é¢‘è®¾ç½®ä¸ºæ— é™å¾ªç¯æ’­æ”¾</li>
                    </ul>
                </div>
                <div class="comparison-item after">
                    <h3>âœ… ä¿®å¤å</h3>
                    <ul>
                        <li>éŸ³é¢‘æ’­æ”¾å®Œæˆåè‡ªåŠ¨æ˜¾ç¤ºé€‰é¡¹</li>
                        <li>å››ä¸ªè§†é¢‘é€‰é¡¹æ­£ç¡®æ¸²æŸ“</li>
                        <li>æ·»åŠ äº†"è·³è¿‡éŸ³é¢‘"æŒ‰é’®</li>
                        <li>ç”¨æˆ·å¯ä»¥æ­£å¸¸ç»§ç»­å­¦ä¹ </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="test-section">
            <h2>æµ‹è¯•é“¾æ¥</h2>
            <p><strong>ä¿®å¤åçš„ vTPR é¡µé¢ï¼š</strong></p>
            <a href="http://localhost:3002/learning/vtpr" class="test-button fixed-button" target="_blank">
                âœ… vTPR éŸ³ç”»åŒ¹é…è®­ç»ƒé¡µé¢
            </a>
            
            <p><strong>å­¦ä¹ åœ°å›¾ï¼ˆéªŒè¯ lesson-7 è·³è½¬ï¼‰ï¼š</strong></p>
            <a href="http://localhost:3002/learning" class="test-button" target="_blank">
                ğŸ—ºï¸ å­¦ä¹ åœ°å›¾é¡µé¢
            </a>
            
            <p><strong>ç›´æ¥æµ‹è¯•é€‰é¡¹æ˜¾ç¤ºï¼š</strong></p>
            <a href="javascript:void(0)" onclick="testOptionsDisplay()" class="test-button">
                ğŸ§ª æµ‹è¯•é€‰é¡¹æ˜¾ç¤ºé€»è¾‘
            </a>
        </div>

        <div class="test-section">
            <h2>æ ¹æœ¬åŸå› åˆ†æ</h2>
            <h3>é—®é¢˜æ ¹æº</h3>
            <p>éŸ³é¢‘æ’­æ”¾å™¨è¢«è®¾ç½®ä¸º <code>repeatMode="single"</code>ï¼Œå¯¼è‡´ï¼š</p>
            <ul>
                <li>éŸ³é¢‘æ— é™å¾ªç¯æ’­æ”¾ï¼Œæ°¸ä¸ç»“æŸ</li>
                <li><code>onEnded</code> å›è°ƒæ°¸è¿œä¸è¢«è§¦å‘</li>
                <li><code>currentStep</code> çŠ¶æ€å§‹ç»ˆä¿æŒä¸º <code>'listening'</code></li>
                <li>é€‰é¡¹åŒºåŸŸè¢«æ¡ä»¶æ¸²æŸ“éšè—</li>
            </ul>

            <h3>ä¿®å¤æ–¹æ¡ˆ</h3>
            <div class="code-block">
// ä¿®å¤å‰
&lt;AudioPlayer
  src={mockLesson.audioSrc}
  onEnded={handleAudioComplete}
  showWaveform={true}
  <span class="highlight">repeatMode="single"</span>  // é—®é¢˜æ‰€åœ¨
  className="mb-4"
/&gt;

// ä¿®å¤å
&lt;AudioPlayer
  src={mockLesson.audioSrc}
  onEnded={handleAudioComplete}
  showWaveform={true}
  <span class="highlight">repeatMode="none"</span>    // å…è®¸éŸ³é¢‘ç»“æŸ
  className="mb-4"
/&gt;</div>
        </div>

        <div class="test-section">
            <h2>ä¿®å¤å†…å®¹è¯¦æƒ…</h2>
            <h3>1. éŸ³é¢‘æ’­æ”¾æ¨¡å¼ä¿®å¤</h3>
            <ul>
                <li>âœ… å°† <code>repeatMode</code> ä» <code>"single"</code> æ”¹ä¸º <code>"none"</code></li>
                <li>âœ… ç¡®ä¿éŸ³é¢‘æ’­æ”¾å®Œæˆåè§¦å‘ <code>onEnded</code> å›è°ƒ</li>
                <li>âœ… æ­£ç¡®åˆ‡æ¢ <code>currentStep</code> çŠ¶æ€åˆ° <code>'selecting'</code></li>
            </ul>

            <h3>2. ç”¨æˆ·ä½“éªŒæ”¹è¿›</h3>
            <ul>
                <li>âœ… æ·»åŠ "è·³è¿‡éŸ³é¢‘ï¼Œç›´æ¥å¼€å§‹é€‰æ‹©"æŒ‰é’®</li>
                <li>âœ… é˜²æ­¢éŸ³é¢‘åŠ è½½å¤±è´¥æ—¶ç”¨æˆ·è¢«å›°</li>
                <li>âœ… æ·»åŠ è°ƒè¯•æ—¥å¿—ä¾¿äºé—®é¢˜æ’æŸ¥</li>
            </ul>

            <h3>3. é€‰é¡¹æ¸²æŸ“é€»è¾‘</h3>
            <ul>
                <li>âœ… æ¡ä»¶æ¸²æŸ“ï¼š<code>currentStep !== 'listening'</code> æ—¶æ˜¾ç¤ºé€‰é¡¹</li>
                <li>âœ… ç½‘æ ¼å¸ƒå±€ï¼š<code>grid-cols-2 gap-4</code> æ˜¾ç¤ºå››ä¸ªé€‰é¡¹</li>
                <li>âœ… äº¤äº’çŠ¶æ€ï¼šé€‰ä¸­ã€æ­£ç¡®/é”™è¯¯åé¦ˆ</li>
            </ul>
        </div>

        <div class="test-section">
            <h2>éªŒè¯æ­¥éª¤</h2>
            <ol>
                <li>
                    <strong>æ­¥éª¤ 1:</strong> è®¿é—® vTPR é¡µé¢
                    <span class="status fixed">å¾…éªŒè¯</span>
                </li>
                <li>
                    <strong>æ­¥éª¤ 2:</strong> ç­‰å¾…éŸ³é¢‘æ’­æ”¾å®Œæˆï¼ˆæˆ–ç‚¹å‡»è·³è¿‡æŒ‰é’®ï¼‰
                    <span class="status fixed">å¾…éªŒè¯</span>
                </li>
                <li>
                    <strong>æ­¥éª¤ 3:</strong> éªŒè¯å³ä¾§æ˜¾ç¤ºå››ä¸ªè§†é¢‘é€‰é¡¹
                    <span class="status fixed">å¾…éªŒè¯</span>
                </li>
                <li>
                    <strong>æ­¥éª¤ 4:</strong> ç‚¹å‡»ä»»ä¸€é€‰é¡¹ï¼ŒéªŒè¯äº¤äº’æ­£å¸¸
                    <span class="status fixed">å¾…éªŒè¯</span>
                </li>
                <li>
                    <strong>æ­¥éª¤ 5:</strong> éªŒè¯é€‰æ‹©åé¦ˆå’Œç»“æœæ˜¾ç¤º
                    <span class="status fixed">å¾…éªŒè¯</span>
                </li>
            </ol>
        </div>

        <div class="test-section">
            <h2>æŠ€æœ¯ç»†èŠ‚</h2>
            <h3>AudioPlayer ç»„ä»¶è¡Œä¸º</h3>
            <ul>
                <li><code>repeatMode="none"</code>: æ’­æ”¾å®Œæˆåè§¦å‘ onEnded</li>
                <li><code>repeatMode="single"</code>: æ— é™å¾ªç¯ï¼Œä¸è§¦å‘ onEnded</li>
                <li><code>repeatMode="segment"</code>: ç‰‡æ®µå¾ªç¯æ’­æ”¾</li>
            </ul>

            <h3>çŠ¶æ€ç®¡ç†æµç¨‹</h3>
            <div class="code-block">
1. åˆå§‹çŠ¶æ€: currentStep = 'listening'
2. éŸ³é¢‘æ’­æ”¾å®Œæˆ: handleAudioComplete() è¢«è°ƒç”¨
3. çŠ¶æ€åˆ‡æ¢: currentStep = 'selecting'
4. æ¡ä»¶æ¸²æŸ“: æ˜¾ç¤ºå››ä¸ªè§†é¢‘é€‰é¡¹
5. ç”¨æˆ·äº¤äº’: é€‰æ‹©é€‰é¡¹ï¼Œæ˜¾ç¤ºåé¦ˆ</div>
        </div>

        <div class="test-section">
            <h2>é¢„æœŸç»“æœ</h2>
            <div style="background: #f0fdf4; padding: 15px; border-radius: 8px; border: 1px solid #bbf7d0;">
                <h3 style="color: #166534; margin-top: 0;">âœ… ä¿®å¤æˆåŠŸæ ‡å¿—</h3>
                <ul style="color: #166534;">
                    <li>éŸ³é¢‘æ’­æ”¾å®Œæˆåï¼Œå³ä¾§è‡ªåŠ¨æ˜¾ç¤ºå››ä¸ªè§†é¢‘é€‰é¡¹</li>
                    <li>é€‰é¡¹ä»¥ 2x2 ç½‘æ ¼å¸ƒå±€æ­£ç¡®æ˜¾ç¤º</li>
                    <li>æ¯ä¸ªé€‰é¡¹åŒ…å«è§†é¢‘é¢„è§ˆå’Œæ ‡é¢˜</li>
                    <li>ç‚¹å‡»é€‰é¡¹æœ‰æ­£ç¡®çš„è§†è§‰åé¦ˆ</li>
                    <li>é€‰æ‹©åæ˜¾ç¤ºæ­£ç¡®/é”™è¯¯çš„ç»“æœåé¦ˆ</li>
                    <li>"è·³è¿‡éŸ³é¢‘"æŒ‰é’®å¯ä»¥ç«‹å³æ˜¾ç¤ºé€‰é¡¹</li>
                </ul>
            </div>
        </div>
    </div>

    <script>
        function testOptionsDisplay() {
            const message = `
æµ‹è¯•é€‰é¡¹æ˜¾ç¤ºé€»è¾‘ï¼š

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·ï¼ˆF12ï¼‰
2. è®¿é—® vTPR é¡µé¢
3. åœ¨æ§åˆ¶å°ä¸­æŸ¥çœ‹æ˜¯å¦æœ‰ "Audio completed, switching to selecting step" æ—¥å¿—
4. æ£€æŸ¥é¡µé¢å…ƒç´ ï¼Œç¡®è®¤é€‰é¡¹åŒºåŸŸçš„ HTML ç»“æ„
5. éªŒè¯ currentStep çŠ¶æ€çš„å˜åŒ–

å¦‚æœé€‰é¡¹ä»ç„¶ä¸æ˜¾ç¤ºï¼Œè¯·æ£€æŸ¥ï¼š
- éŸ³é¢‘æ–‡ä»¶æ˜¯å¦æ­£ç¡®åŠ è½½
- onEnded å›è°ƒæ˜¯å¦è¢«è§¦å‘
- currentStep çŠ¶æ€æ˜¯å¦æ­£ç¡®åˆ‡æ¢
- CSS æ ·å¼æ˜¯å¦éšè—äº†é€‰é¡¹å…ƒç´ 
            `;
            alert(message);
        }

        // é¡µé¢åŠ è½½å®Œæˆåçš„çŠ¶æ€æ£€æŸ¥
        window.addEventListener('load', function() {
            console.log('vTPR é€‰é¡¹æ˜¾ç¤ºé—®é¢˜ä¿®å¤éªŒè¯é¡µé¢å·²åŠ è½½');
            console.log('Web æœåŠ¡å™¨è¿è¡Œåœ¨: http://localhost:3002');
            console.log('è¯·æŒ‰ç…§éªŒè¯æ­¥éª¤æµ‹è¯•ä¿®å¤ç»“æœ');
        });
    </script>
</body>
</html>
