# SmarTalk å­¦ä¹ åœ°å›¾è¿›åº¦ç®¡ç†

## ğŸ—ºï¸ å­¦ä¹ è·¯å¾„è®¾è®¡

### æ•´ä½“æ¶æ„
æ¯ä¸ªå…´è¶£ä¸»é¢˜åŒ…å«2ä¸ªç« èŠ‚ï¼Œå½¢æˆå®Œæ•´çš„å­¦ä¹ è¿›é˜¶è·¯å¾„ï¼š
- **ç¬¬1ç« **: åŸºç¡€åœºæ™¯ï¼Œå»ºç«‹ä¿¡å¿ƒ
- **ç¬¬2ç« **: è¿›é˜¶åœºæ™¯ï¼Œæå‡æŠ€èƒ½

### è§£é”æœºåˆ¶
- ç”¨æˆ·é€‰æ‹©å…´è¶£åï¼Œç¬¬1ç« è‡ªåŠ¨è§£é”
- å®Œæˆç¬¬1ç« çš„vTPRå­¦ä¹ åï¼Œç¬¬2ç« è§£é”
- æ¯ç« åŒ…å«15ä¸ªæ ¸å¿ƒè¯æ±‡ï¼Œ60ä¸ªvTPRç»ƒä¹ è§†é¢‘

## ğŸ“š å„ä¸»é¢˜ç« èŠ‚å†…å®¹

### ğŸŒ æ—…è¡Œä¸»é¢˜
**ç¬¬1ç« : å·´é»å’–å•¡é¦†åˆé‡**
- åœºæ™¯: ä¸­å›½æ¸¸å®¢ä¸æ³•å›½å’–å•¡å¸ˆçš„æ¸©é¦¨äº’åŠ¨
- éš¾åº¦: åˆçº§ (Beginner)
- è¯æ±‡: Welcome, Recommend, Signature, Perfect, Window, Beautiful, Wonderful, Atmosphere, Magical, Hope, Smooth, Aromatic, Choice, View, Exactly
- å­¦ä¹ ç›®æ ‡: å»ºç«‹åŸºç¡€æ—…è¡Œäº¤æµä¿¡å¿ƒ

**ç¬¬2ç« : æœºåœºé—®è·¯** ğŸ”“
- åœºæ™¯: åœ¨å›½é™…æœºåœºå¯»æ±‚å¸®åŠ©å’ŒæŒ‡è·¯
- éš¾åº¦: åˆçº§ (Beginner)
- è¯æ±‡: Excuse me, Looking for, Lost, Terminal, Shuttle, Corridor, Journey, Run, Departure, Duty-free, Boards, Plenty, Reach, Saved, Safe travels
- å­¦ä¹ ç›®æ ‡: æŒæ¡å¤æ‚ç¯å¢ƒä¸­çš„é—®é¢˜è§£å†³èƒ½åŠ›

### ğŸ¬ ç”µå½±ä¸»é¢˜
**ç¬¬1ç« : ç”µå½±é™¢å¶é‡**
- åœºæ™¯: ç”µå½±çˆ±å¥½è€…åœ¨å½±é™¢å¤§å…çš„è®¨è®º
- éš¾åº¦: åˆçº§ (Beginner)
- è¯æ±‡: Incredible, Plot, Twist, Ending, Cinematography, Stunning, Soundtrack, Emotional, Performance, Outstanding, Transformation, Recommendation, Realistic, Captured, Impressive
- å­¦ä¹ ç›®æ ‡: å­¦ä¼šåŸºç¡€çš„è‰ºæœ¯è®¨è®º

**ç¬¬2ç« : ç½‘ç»œå½±è¯„è®¨è®º** ğŸ”“
- åœºæ™¯: å½±è¯„åšä¸»ä¸ç”µå½±å­¦é™¢å­¦ç”Ÿçš„æ·±åº¦åˆ†æ
- éš¾åº¦: ä¸­çº§ (Intermediate)
- è¯æ±‡: Published, Review, Brilliant, Approach, Mixed, Stand out, Narrative, Unconventional, Linear, Flashbacks, Complexity, Engaged, Expectations, Exceptional, Perspectives
- å­¦ä¹ ç›®æ ‡: æå‡ä¸“ä¸šå½±è¯„åˆ†æèƒ½åŠ›

### ğŸ’¼ èŒåœºä¸»é¢˜
**ç¬¬1ç« : ä¼šè®®å®¤è®¨è®º**
- åœºæ™¯: é¡¹ç›®ç»ç†ä¸å›¢é˜Ÿæˆå‘˜çš„ä¼šè®®è®¨è®º
- éš¾åº¦: ä¸­çº§ (Intermediate)
- è¯æ±‡: Status, Contribute, Challenges, Deadline, Obstacles, Prioritize, Critical, Implement, Strategy, Iteration, Proposal, Teamwork, Eager, Overcome, Elaborate
- å­¦ä¹ ç›®æ ‡: æŒæ¡åŸºç¡€å•†åŠ¡æ²Ÿé€š

**ç¬¬2ç« : å®¢æˆ·æ¼”ç¤ºæ±‡æŠ¥** ğŸ”“
- åœºæ™¯: é¡¹ç›®è´Ÿè´£äººå‘é‡è¦å®¢æˆ·çš„äº§å“æ¼”ç¤º
- éš¾åº¦: é«˜çº§ (Advanced)
- è¯æ±‡: Proposal, Requirements, Demonstrate, Dashboard, Real-time, Analytics, Operations, Interface, Integrate, Migration, Scalability, Infrastructure, Accommodate, Comprehensive, Implementation
- å­¦ä¹ ç›®æ ‡: åŸ¹å…»é«˜çº§å•†åŠ¡æ¼”ç¤ºæŠ€èƒ½

## ğŸ”“ è§£é”é€»è¾‘å®ç°

### æ•°æ®åº“è®¾è®¡
```sql
-- ç”¨æˆ·è¿›åº¦è¡¨
CREATE TABLE user_progress (
  id SERIAL PRIMARY KEY,
  user_id VARCHAR(255) NOT NULL,
  drama_id VARCHAR(255) NOT NULL,
  completed_keywords INTEGER DEFAULT 0,
  total_keywords INTEGER NOT NULL,
  is_completed BOOLEAN DEFAULT FALSE,
  magic_moment_completed BOOLEAN DEFAULT FALSE,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- å‰§é›†è¡¨å¢åŠ é¡ºåºå­—æ®µ
ALTER TABLE dramas ADD COLUMN "order" INTEGER DEFAULT 1;
```

### è§£é”æ¡ä»¶æ£€æŸ¥
```typescript
// æ£€æŸ¥ç« èŠ‚è§£é”æ¡ä»¶
async function checkChapterUnlock(userId: string, interestId: string): Promise<Drama[]> {
  const userProgress = await prisma.userProgress.findMany({
    where: { userId },
    include: { drama: true }
  });

  const allDramas = await prisma.drama.findMany({
    where: { interestId },
    orderBy: { order: 'asc' }
  });

  const unlockedDramas = [];
  
  for (const drama of allDramas) {
    if (drama.order === 1) {
      // ç¬¬ä¸€ç« æ€»æ˜¯è§£é”
      unlockedDramas.push({ ...drama, isUnlocked: true });
    } else {
      // æ£€æŸ¥å‰ä¸€ç« æ˜¯å¦å®Œæˆ
      const previousDrama = allDramas.find(d => d.order === drama.order - 1);
      const previousProgress = userProgress.find(p => p.dramaId === previousDrama?.id);
      
      const isUnlocked = previousProgress?.magicMomentCompleted || false;
      unlockedDramas.push({ ...drama, isUnlocked });
    }
  }
  
  return unlockedDramas;
}
```

## ğŸ¯ å­¦ä¹ åœ°å›¾UIè®¾è®¡

### ç« èŠ‚å¡ç‰‡çŠ¶æ€
1. **å·²å®Œæˆ** âœ…
   - ç»¿è‰²è¾¹æ¡†å’Œå®Œæˆå¾½ç« 
   - æ˜¾ç¤º"å·²å®Œæˆ â€¢ Xä¸ªæ•…äº‹çº¿ç´¢"
   - å¯é‡å¤å­¦ä¹ 

2. **è¿›è¡Œä¸­** ğŸ”„
   - è“è‰²è¾¹æ¡†å’Œè¿›åº¦æ¡
   - æ˜¾ç¤º"è¿›è¡Œä¸­ â€¢ X/15"
   - ç»§ç»­å­¦ä¹ æŒ‰é’®

3. **å·²è§£é”** ğŸ”“
   - æ­£å¸¸è¾¹æ¡†ï¼Œå¯ç‚¹å‡»
   - æ˜¾ç¤ºç« èŠ‚ä¿¡æ¯å’Œé¢„ä¼°æ—¶é—´
   - å¼€å§‹å­¦ä¹ æŒ‰é’®

4. **é”å®šçŠ¶æ€** ğŸ”’
   - ç°è‰²æ˜¾ç¤ºï¼Œä¸å¯ç‚¹å‡»
   - æ˜¾ç¤º"å®Œæˆä¸Šä¸€ç« èŠ‚åè§£é”"
   - é”å®šå›¾æ ‡

### è¿›åº¦å¯è§†åŒ–
```typescript
interface ChapterProgress {
  id: string;
  title: string;
  description: string;
  order: number;
  difficulty: 'beginner' | 'intermediate' | 'advanced';
  isUnlocked: boolean;
  isCompleted: boolean;
  progress: number; // 0-100
  keywordCount: number;
  completedKeywords: number;
  estimatedTime: number; // åˆ†é’Ÿ
}
```

## ğŸš€ å®ç°æ­¥éª¤

### 1. åç«¯APIæ›´æ–°
```typescript
// GET /api/v1/learning-map/:userId/:interestId
export async function getLearningMap(req: Request, res: Response) {
  const { userId, interestId } = req.params;
  
  try {
    const chapters = await checkChapterUnlock(userId, interestId);
    const userStats = await getUserLearningStats(userId, interestId);
    
    res.json({
      chapters,
      stats: userStats,
      overallProgress: calculateOverallProgress(chapters)
    });
  } catch (error) {
    res.status(500).json({ error: 'Failed to load learning map' });
  }
}
```

### 2. å‰ç«¯ç»„ä»¶æ›´æ–°
```typescript
// LearningMapScreen.tsx
const LearningMapScreen = () => {
  const [chapters, setChapters] = useState<ChapterProgress[]>([]);
  
  useEffect(() => {
    loadLearningMap();
  }, []);
  
  const loadLearningMap = async () => {
    const response = await ApiService.getLearningMap(userId, interestId);
    setChapters(response.chapters);
  };
  
  const handleChapterPress = (chapter: ChapterProgress) => {
    if (!chapter.isUnlocked) {
      showUnlockMessage();
      return;
    }
    
    navigation.navigate('Learning', { 
      dramaId: chapter.id,
      isNewChapter: !chapter.isCompleted 
    });
  };
  
  // ... æ¸²æŸ“é€»è¾‘
};
```

### 3. è§£é”åŠ¨ç”»æ•ˆæœ
```typescript
// ç« èŠ‚è§£é”æ—¶çš„åº†ç¥åŠ¨ç”»
const celebrateChapterUnlock = (chapterTitle: string) => {
  showNotification({
    title: 'ğŸ‰ æ–°ç« èŠ‚è§£é”ï¼',
    message: `æ­å–œè§£é”"${chapterTitle}"`,
    type: 'success',
    duration: 3000
  });
  
  // æ’­æ”¾è§£é”éŸ³æ•ˆ
  playUnlockSound();
  
  // æ˜¾ç¤ºè§£é”åŠ¨ç”»
  triggerUnlockAnimation();
};
```

## ğŸ“Š å­¦ä¹ æ•°æ®åˆ†æ

### å…³é”®æŒ‡æ ‡
- **ç« èŠ‚å®Œæˆç‡**: å„ç« èŠ‚çš„å®Œæˆç™¾åˆ†æ¯”
- **è§£é”è½¬åŒ–ç‡**: ç¬¬1ç« å®Œæˆåè¿›å…¥ç¬¬2ç« çš„æ¯”ä¾‹
- **è¯æ±‡æŒæ¡åº¦**: æ¯ä¸ªè¯æ±‡çš„æ­£ç¡®ç‡ç»Ÿè®¡
- **å­¦ä¹ æ—¶é•¿**: æ¯ç« èŠ‚çš„å¹³å‡å­¦ä¹ æ—¶é—´
- **é‡å¤å­¦ä¹ ç‡**: ç”¨æˆ·é‡å¤å­¦ä¹ ç« èŠ‚çš„é¢‘ç‡

### æ•°æ®æ”¶é›†
```typescript
// ç« èŠ‚å®Œæˆäº‹ä»¶
AnalyticsService.track('chapter_completed', {
  userId,
  chapterId: drama.id,
  interestId: drama.interestId,
  chapterOrder: drama.order,
  completionTime: Date.now() - startTime,
  keywordsLearned: completedKeywords.length,
  accuracy: calculateAccuracy(attempts)
});

// ç« èŠ‚è§£é”äº‹ä»¶
AnalyticsService.track('chapter_unlocked', {
  userId,
  unlockedChapterId: nextChapter.id,
  previousChapterId: currentChapter.id,
  unlockTime: Date.now()
});
```

## ğŸ¯ ç”¨æˆ·ä½“éªŒä¼˜åŒ–

### æ¿€åŠ±æœºåˆ¶
1. **è§£é”åº†ç¥**: æ–°ç« èŠ‚è§£é”æ—¶çš„ç‰¹æ®ŠåŠ¨ç”»å’ŒéŸ³æ•ˆ
2. **è¿›åº¦å¯è§†åŒ–**: æ¸…æ™°çš„è¿›åº¦æ¡å’Œå®ŒæˆçŠ¶æ€
3. **æˆå°±ç³»ç»Ÿ**: å®Œæˆç« èŠ‚è·å¾—ç‰¹æ®Šå¾½ç« 
4. **å­¦ä¹ å»ºè®®**: åŸºäºè¿›åº¦çš„ä¸ªæ€§åŒ–å­¦ä¹ å»ºè®®

### å­¦ä¹ è·¯å¾„å¼•å¯¼
1. **ä¸‹ä¸€æ­¥æç¤º**: æ˜ç¡®æŒ‡ç¤ºç”¨æˆ·ä¸‹ä¸€æ­¥åº”è¯¥åšä»€ä¹ˆ
2. **éš¾åº¦é€’è¿›**: ä»ç®€å•åˆ°å¤æ‚çš„è‡ªç„¶è¿‡æ¸¡
3. **å¤ä¹ æœºåˆ¶**: é¼“åŠ±ç”¨æˆ·å¤ä¹ å·²å®Œæˆçš„ç« èŠ‚
4. **è·¨ä¸»é¢˜æ¨è**: å®Œæˆä¸€ä¸ªä¸»é¢˜åæ¨èå…¶ä»–ä¸»é¢˜

è¿™ä¸ªå­¦ä¹ åœ°å›¾ç³»ç»Ÿå°†ä¸ºç”¨æˆ·æä¾›æ¸…æ™°çš„å­¦ä¹ è·¯å¾„å’ŒæŒç»­çš„æ¿€åŠ±ï¼Œç¡®ä¿ä»–ä»¬èƒ½å¤Ÿå¾ªåºæ¸è¿›åœ°æå‡è‹±è¯­èƒ½åŠ›ï¼